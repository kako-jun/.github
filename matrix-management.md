# マトリクス管理システム - 抜け漏れ防止用2次元管理表

## 目的

3プロジェクト（lawkit, diffai, diffx）の包括的なテスト網羅率100%達成のため、作業の抜け漏れを防止する2次元マトリクス管理システムを構築します。

## 問題認識

- --no-colorオプション追加作業が割り込み、本来の全引数・全オプションテスト網羅作業が中断
- 進捗状況が不明瞭になり、完了状況の把握が困難
- ドキュメントからの機能抽出→テスト作成の流れが追跡できない

## マトリクス管理の原則

### 1. **引数・オプション対応マトリクス**
- **縦軸**: 各プロジェクトの全引数・全オプション
- **横軸**: 実装形態（Rust CLI, Rust core, pip package, npm package）
- **セル内容**: 実装状況、テスト状況、ドキュメント状況

### 2. **テスト網羅マトリクス**  
- **縦軸**: 機能・コマンド・オプション
- **横軸**: テスト種別（unit, integration, cli, docs_examples等）
- **セル内容**: テスト実装状況、成功/失敗、カバレッジ

### 3. **ドキュメント整合性マトリクス**
- **縦軸**: 機能・仕様
- **横軸**: ドキュメント種別（CLI help, user guide, API reference等）
- **セル内容**: 記載状況、実装との整合性、例示の有無

## 作業フロー

1. **全機能洗い出し** - docsからの完全抽出
2. **マトリクス作成** - 2次元表による可視化  
3. **進捗追跡** - セル単位での作業管理
4. **抜け漏れ特定** - 空白セルの識別
5. **完全網羅確認** - 100%達成の検証

---

## 📊 1. 引数・オプション対応マトリクス

### lawkit 引数・オプション対応表

| 引数・オプション | Rust CLI | Rust Core | pip package | npm package | 備考 |
|------------------|----------|-----------|-------------|-------------|------|
| **基本引数** |  |  |  |  |  |
| `<input>` | ✅ | ✅ | ❓ | ❓ | ファイルパス・数値入力 |
| **基本オプション** |  |  |  |  |  |
| `--help, -h` | ✅ | N/A | ❓ | ❓ | ヘルプ表示 |
| `--version, -V` | ✅ | N/A | ❓ | ❓ | バージョン表示 |
| `--format <FORMAT>` | ✅ | ✅ | ❓ | ❓ | text/json/yaml/csv/toml/xml |
| `--quiet, -q` | ✅ | ✅ | ❓ | ❓ | 簡潔出力 |
| `--verbose, -v` | ✅ | ✅ | ❓ | ❓ | 詳細出力 |
| `--no-color` | ✅ | ✅ | ❓ | ❓ | 色出力無効化 |
| **分析オプション** |  |  |  |  |  |
| `--confidence <LEVEL>` | ✅ | ✅ | ❓ | ❓ | 信頼度レベル |
| `--threshold <VALUE>` | ✅ | ✅ | ❓ | ❓ | 閾値設定 |
| `--min-count <COUNT>` | ✅ | ✅ | ❓ | ❓ | 最小サンプル数 |
| `--min-value <VALUE>` | ✅ | ✅ | ❓ | ❓ | 最小値フィルタ |
| `--max-value <VALUE>` | ✅ | ✅ | ❓ | ❓ | 最大値フィルタ |
| `--sample-size <SIZE>` | ✅ | ✅ | ❓ | ❓ | サンプルサイズ |
| **サブコマンド** |  |  |  |  |  |
| `benf` | ✅ | ✅ | ❓ | ❓ | ベンフォード法則分析 |
| `pareto` | ✅ | ✅ | ❓ | ❓ | パレート分析 |
| `zipf` | ✅ | ✅ | ❓ | ❓ | ジップ法則分析 |
| `normal` | ✅ | ✅ | ❓ | ❓ | 正規分布分析 |
| `poisson` | ✅ | ✅ | ❓ | ❓ | ポアソン分布分析 |
| `analyze` | ✅ | ✅ | ❓ | ❓ | 複合分析 |
| `validate` | ✅ | ✅ | ❓ | ❓ | データ検証 |
| `diagnose` | ✅ | ✅ | ❓ | ❓ | 診断・競合検出 |
| `generate` | ✅ | ✅ | ❓ | ❓ | サンプルデータ生成 |
| `list` | ✅ | ✅ | ❓ | ❓ | 利用可能法則一覧 |
| `selftest` | ✅ | ✅ | ❓ | ❓ | セルフテスト実行 |

### diffai 引数・オプション対応表

| 引数・オプション | Rust CLI | Rust Core | pip package | npm package | 備考 |
|------------------|----------|-----------|-------------|-------------|------|
| **基本引数** |  |  |  |  |  |
| `<file1>` | ✅ | ✅ | ❓ | ❓ | 比較元ファイル |
| `<file2>` | ✅ | ✅ | ❓ | ❓ | 比較先ファイル |
| **基本オプション** |  |  |  |  |  |
| `--help, -h` | ✅ | N/A | ❓ | ❓ | ヘルプ表示 |
| `--version, -V` | ✅ | N/A | ❓ | ❓ | バージョン表示 |
| `--format <FORMAT>` | ✅ | ✅ | ❓ | ❓ | json/yaml/csv/toml/xml |
| `--output <FORMAT>` | ✅ | ✅ | ❓ | ❓ | 出力形式指定 |
| `--verbose, -v` | ✅ | ✅ | ❓ | ❓ | 詳細出力 |
| `--no-color` | ✅ | ✅ | ❓ | ❓ | 色出力無効化 |
| **比較オプション** |  |  |  |  |  |
| `--epsilon <VALUE>` | ✅ | ✅ | ❓ | ❓ | 数値比較許容誤差 |
| `--array-id-key <KEY>` | ✅ | ✅ | ❓ | ❓ | 配列要素ID指定 |
| `--ignore-keys-regex <REGEX>` | ✅ | ✅ | ❓ | ❓ | キー除外正規表現 |
| `--path-filter <PATH>` | ✅ | ✅ | ❓ | ❓ | パスフィルタリング |
| `--recursive, -r` | ✅ | ✅ | ❓ | ❓ | 再帰的比較 |
| **ML分析オプション** |  |  |  |  |  |
| `--ml-analysis` | ✅ | ✅ | ❓ | ❓ | ML分析有効化 |
| `--ml-threshold <VALUE>` | ✅ | ✅ | ❓ | ❓ | ML分析閾値 |
| `--memory-limit <SIZE>` | ✅ | ✅ | ❓ | ❓ | メモリ制限 |

### diffx 引数・オプション対応表

| 引数・オプション | Rust CLI | Rust Core | pip package | npm package | 備考 |
|------------------|----------|-----------|-------------|-------------|------|
| **基本引数** |  |  |  |  |  |
| `<file1>` | ✅ | ✅ | ❓ | ❓ | 比較元ファイル |
| `<file2>` | ✅ | ✅ | ❓ | ❓ | 比較先ファイル |
| **基本オプション** |  |  |  |  |  |
| `--help, -h` | ✅ | N/A | ❓ | ❓ | ヘルプ表示 |
| `--version, -V` | ✅ | N/A | ❓ | ❓ | バージョン表示 |
| `--format <FORMAT>` | ✅ | ✅ | ❓ | ❓ | unified/context/side-by-side |
| `--output <FORMAT>` | ✅ | ✅ | ❓ | ❓ | json/yaml/csv等 |
| `--verbose, -v` | ✅ | ✅ | ❓ | ❓ | 詳細出力 |
| `--quiet, -q` | ✅ | ✅ | ❓ | ❓ | 簡潔出力 |
| `--brief, -b` | ✅ | ✅ | ❓ | ❓ | 差分有無のみ |
| `--no-color` | ✅ | ✅ | ❓ | ❓ | 色出力無効化 |
| **比較オプション** |  |  |  |  |  |
| `--context <NUM>` | ✅ | ✅ | ❓ | ❓ | コンテキスト行数 |
| `--epsilon <VALUE>` | ✅ | ✅ | ❓ | ❓ | 数値比較許容誤差 |
| `--array-id-key <KEY>` | ✅ | ✅ | ❓ | ❓ | 配列要素ID指定 |
| `--ignore-keys-regex <REGEX>` | ✅ | ✅ | ❓ | ❓ | キー除外正規表現 |
| `--ignore-case, -i` | ✅ | ✅ | ❓ | ❓ | 大文字小文字無視 |
| `--ignore-whitespace, -w` | ✅ | ✅ | ❓ | ❓ | 空白文字無視 |
| `--path-filter <PATH>` | ✅ | ✅ | ❓ | ❓ | パスフィルタリング |
| `--recursive, -r` | ✅ | ✅ | ❓ | ❓ | 再帰的比較 |
| `--side-by-side, -y` | ✅ | ✅ | ❓ | ❓ | 横並び表示 |

---

## 📋 2. テスト網羅マトリクス

### lawkit テスト網羅状況

| 機能・コマンド | unit | integration | cli | docs_examples | basic | features | formats | errors | 状況 |
|----------------|------|-------------|-----|---------------|-------|----------|---------|--------|------|
| **benf コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **pareto コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **zipf コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **normal コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **poisson コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **analyze コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **validate コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **diagnose コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **generate コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **list コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **selftest コマンド** | ⭕ | ⭕ | ✅ | ⭕ | ✅ | ✅ | ✅ | ✅ | 95% |
| **--no-color オプション** | ⭕ | ⭕ | ✅ | ⭕ | ⭕ | ⭕ | ⭕ | ⭕ | 100% |

### diffai テスト網羅状況

| 機能・コマンド | unit | integration | cli | docs_examples | basic | features | formats | errors | 状況 |
|----------------|------|-------------|-----|---------------|-------|----------|---------|--------|------|
| **基本diff機能** | ⭕ | ⭕ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 90% |
| **ML分析機能** | ⭕ | ⭕ | ⭕ | ⭕ | ⭕ | ✅ | ⭕ | ⭕ | 85% |
| **--no-color オプション** | ⭕ | ⭕ | ✅ | ⭕ | ⭕ | ⭕ | ⭕ | ⭕ | 100% |

### diffx テスト網羅状況

| 機能・コマンド | unit | integration | cli | docs_examples | basic | features | formats | errors | 状況 |
|----------------|------|-------------|-----|---------------|-------|----------|---------|--------|------|
| **基本diff機能** | ⭕ | ⭕ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 97% |
| **--no-color オプション** | ⭕ | ⭕ | ✅ | ⭕ | ⭕ | ⭕ | ⭕ | ⭕ | 100% |

**凡例**: ✅完了 ⭕未実装/空 ❌失敗

---

## 🔄 次のアクション

1. **pip/npm パッケージ調査** - 各プロジェクトのpython/npm実装状況確認
2. **unit/integrationテスト拡充** - 空白セルの埋め込み作業
3. **docs_examples テスト強化** - ドキュメント例示の網羅的テスト
4. **100%達成検証** - 全マトリクスセル完了確認

このマトリクス管理により、作業の抜け漏れを防止し、真の100%網羅率達成を目指します。